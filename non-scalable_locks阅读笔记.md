#### Non-scalable locks are dangerous

非可扩展的锁很糟糕，一方面它们在核数增加时会导致性能突然性地急剧下降，另一方面即使临界区很短小，性能陡降的现象仍然会发生。

这篇文章不是创新地提出这一观点，而是通过一系列实验和理论分析，提出一个性能模型更深入地去分析非可扩展锁如何对性能造成影响。

研究者们用马尔可夫链来对ticket lock建模，状态数代表排队等锁的进程（core）数。然后用了排队论里的建模方法来求解这个状态机的状态转移规律。这个思路很有趣。模型很直观，很简洁，对实际情况拟合的效果相当不错。

不过Figure8 Figure9所针对的“a microbenchmark”没有具体的解释，可能是研究者们自己构造的一个测试样例。否则似乎也不太方便去灵活调整serial section所占的比例。似乎是自己构造的一个互斥锁的实验。所以这还是算一个模拟性质实验，结果比较理想化。

文章还对若干不同的可扩展的锁进行了对比，并选择了其中的MCS锁，替换了Linux内核中的ticket spin lock，在四个benchmark上做了实验测试。performance collapse的现象大大缓解。

文章的研究工作很完整，有理论推导的模型，有模拟论证，有对比实验，有实际的工程（修改kernel）和测试。不过文章的核心思路很简单，解决问题的手段并不复杂。在多核可扩展性的问题（同步开销）研究中，引入排队论和马尔可夫链模型的思路我以前未曾接触过，因而觉得很新颖。我觉得这里面的洞见在于把等待锁的问题抽象成有限状态转换的问题，从而利用马尔可夫链的性质和排队论的简单性质得出一些性能方面的结论。